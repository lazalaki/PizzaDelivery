(this["webpackJsonppizza-front"]=this["webpackJsonppizza-front"]||[]).push([[0],{122:function(e,a,t){e.exports=t(202)},127:function(e,a,t){},177:function(e,a,t){},178:function(e,a,t){},179:function(e,a,t){},181:function(e,a,t){},182:function(e,a,t){},185:function(e,a,t){},202:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),c=t(44),o=t.n(c),l=(t(127),t(89),t(90),t(91),t(4)),s=t.n(l),u=t(16),i=t(120),m=t(87),d={user:null,isLoggedIn:!1,food:[],orders:[],currency:"USD",dollarRate:1.14,currentOrder:null,toast:null},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_USER":case"SET_LOGGED_IN":case"SET_FOOD":case"SET_ORDERS":case"SET_CURRENCY":case"SET_CURRENT_ORDER":case"SET_TOAST":return Object(m.a)(Object(m.a)({},e),a.payload);default:return e}},f=function(e,a){a({type:"SET_USER",payload:{user:e}})},h=function(e,a){a({type:"SET_LOGGED_IN",payload:{isLoggedIn:e}})},E=function(e,a){a({type:"SET_CURRENCY",payload:{currency:e}})},v=function(e,a){a({type:"SET_TOAST",payload:{toast:e}})},g=t(70),b=t.n(g),w=function(e,a){return b.a.post("".concat("https://pizza-delivery-novi-sad.herokuapp.com/api").concat(e),a)},y=function(e){return b.a.get("".concat("https://pizza-delivery-novi-sad.herokuapp.com/api").concat(e))},C=function(e,a,t){return r="/users/".concat(e,"/orders/").concat(a,"/order-item/").concat(t),b.a.delete("".concat("https://pizza-delivery-novi-sad.herokuapp.com/api").concat(r));var r},O=function(e,a,t){return r="/users/".concat(e,"/orders/").concat(a),n=t,b.a.patch("".concat("https://pizza-delivery-novi-sad.herokuapp.com/api").concat(r),n);var r,n},x=function(e){return w("/users/".concat(e,"/orders"),{})},k=Object(r.createContext)({}),N=function(e){var a=e.children,t=Object(r.useReducer)(p,d),c=Object(i.a)(t,2),o=c[0],l=c[1];Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("user"));e&&m(e),j()}),[]),Object(r.useEffect)((function(){o.user&&o.user.id&&(T(),_())}),[o.user]);var m=function(e){localStorage.setItem("user",JSON.stringify(e)),f(e,l),h(!0,l)},g=function(){var e=Object(u.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C(o.user.id,o.currentOrder.id,a);case 3:_(),R("You have removed order item from cart"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),N(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}(),b=function(){var e=Object(u.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t=o.user.id,r=o.currentOrder.id,n={foodId:a},w("/users/".concat(t,"/orders/").concat(r,"/order-item"),n);case 3:_(),R("You have added item to cart"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),N(e.t0.message);case 10:case"end":return e.stop()}var t,r,n}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}(),O=function(){var e=Object(u.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(a,l);case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),N=function(){var e=Object(u.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O({type:"error",message:a});case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),R=function(){var e=Object(u.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O({type:"success",message:a});case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),S=function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(null,l);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(u.a)(s.a.mark((function e(){var a,t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("/food");case 3:a=e.sent,t=a.data,function(e,a){a({type:"SET_FOOD",payload:{food:e}})}(t.foods,l),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),N(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(u.a)(s.a.mark((function e(){var a,t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r=o.user.id,y("/users/".concat(r,"/orders"));case 3:a=e.sent,t=a.data,function(e,a){a({type:"SET_ORDERS",payload:{orders:e}})}(t.orders,l),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),N(e.t0.message);case 11:case"end":return e.stop()}var r}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(u.a)(s.a.mark((function e(){var a,t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r=o.user.id,y("/users/".concat(r,"/orders/last"));case 3:if(a=e.sent,(t=a.data).order){e.next=10;break}return e.next=8,x(o.user.id);case 8:e.next=11;break;case 10:(function(e,a){a({type:"SET_CURRENT_ORDER",payload:{currentOrder:e}})})(t.order,l);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),N(e.t0.message);case 16:case"end":return e.stop()}var r}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return n.a.createElement(k.Provider,{value:{state:o,setUser:m,logout:function(){localStorage.clear(),f(null,l),h(!1,l)},setEurAsCurrency:function(){E("EUR",l)},setDollarAsCurrency:function(){E("USD",l)},removeItemFromCart:g,addOrderItemToCart:b,showToast:O,showError:N,showSuccess:R,clearToast:S,getCurrentOrder:_,getOrders:T}},a)},R=t(2),S=t(8),j=function(){return"".concat("/onboarding","/login")},T=function(){return"".concat("/onboarding","/register")},_=function(){return"".concat("/home","/orders")},U=function(){return"".concat("/home","/cart")},D=t(109),F=t(110),I=t(26),L=Object(S.g)((function(e){var a=e.history,t=Object(r.useContext)(k),c=t.state,o=t.logout,l=t.setEurAsCurrency,s=t.setDollarAsCurrency,u=[{label:"Home",command:function(){return m("menu")}},{label:"Orders",command:function(){return m("order")}},{label:"Cart",icon:"pi pi-shopping-cart",command:function(){return m("cart")}},{label:"EUR",command:function(){return m("eur")}},{label:"USD",command:function(){return m("usd")}}],i=[{label:"Home",command:function(){return m("menu")}}],m=function(e){switch(e){case"menu":a.push("/home");break;case"order":a.push(_());break;case"cart":a.push(U());break;case"eur":l();break;case"usd":s();break;default:a.push("/home")}};return n.a.createElement(n.a.Fragment,null,n.a.createElement(F.Menubar,{model:c.isLoggedIn?u:i},c.isLoggedIn?n.a.createElement(I.Button,{label:"Logout",icon:"pi pi-power-off",style:{marginLeft:4},onClick:o}):n.a.createElement(I.Button,{label:"Login",icon:"pi pi-power-off",style:{marginLeft:4},onClick:function(){a.push(j())}})))})),Y=t(41),q=t(64),z=t(114),B=(t(177),function(e){var a=e.label,t=e.name,r=e.onChange,c=e.value,o=e.disabled,l=void 0!==o&&o,s=e.type,u=void 0===s?"text":s,i=e.classes,m=void 0===i?"":i,d=e.formik,p=void 0===d?null:d;return n.a.createElement("div",{className:"p-field p-grid"},n.a.createElement(R.Col,null,n.a.createElement("label",{htmlFor:t,className:"p-col-fixed",style:{width:"100px"}},a)),n.a.createElement(R.Col,{className:"mg-top"},n.a.createElement("div",{className:"p-col"},n.a.createElement(R.Col,{lg:12,md:12,xs:12,sm:12},n.a.createElement(z.InputText,{id:t,type:u,name:t,onChange:r,value:c,disabled:l,className:m,onBlur:p.handleBlur})),n.a.createElement(R.Col,{lg:12,md:12,xs:12,sm:12,className:"error"},p&&p.touched&&p.touched[t]&&p.errors&&p.errors[t]?n.a.createElement("span",null,p.errors[t]):n.a.createElement(n.a.Fragment,null)))))}),P=t(30),A=(t(178),Object(S.g)((function(e){var a=e.history,t=Object(Y.b)().t,c=Object(r.useContext)(k),o=c.setUser,l=c.showSuccess,i=c.showError,m=Object(q.a)({initialValues:{email:"",password:""},validationSchema:P.a().shape({password:P.b().min(2,"Too Short!").max(50,"Too Long!").required("Required"),email:P.b().email("Invalid email").required("Required")})}),d=function(){var e=Object(u.a)(s.a.mark((function e(){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n=m.values,w("".concat("/auth","/login"),n);case 3:t=e.sent,r=t.data,o(r.user),l("You have successfully logged in"),a.push("/home"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),i(e.t0.message);case 13:case"end":return e.stop()}var n}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"form"},n.a.createElement(R.Row,{className:"raw-height"},n.a.createElement(R.Col,null,n.a.createElement(B,{name:"email",label:t("onboarding.emailPlaceholder"),onChange:m.handleChange,value:m.values.email,formik:m,className:"input"}))),n.a.createElement(R.Row,{className:"raw-height"},n.a.createElement(R.Col,null,n.a.createElement(B,{type:"password",name:"password",onChange:m.handleChange,value:m.values.password,label:t("onboarding.passwordPlaceholder"),formik:m,className:"input"}))),n.a.createElement(R.Row,{className:"raw-height"},n.a.createElement(R.Col,{lg:12,md:12,xs:12,sm:12},n.a.createElement(I.Button,{label:"Submit",disabled:!(m.isValid&&m.dirty),className:"p-button-rounded",onClick:d})),n.a.createElement(R.Col,{lg:12,md:12,xs:12,sm:12},n.a.createElement("a",{href:T()},"Go to register page?")))))}))),G=(t(179),Object(S.g)((function(e){var a=e.history,t=Object(Y.b)().t,c=Object(r.useContext)(k),o=c.showSuccess,l=c.showError,i=Object(q.a)({initialValues:{firstName:"",lastName:"",email:"",password:""},validationSchema:P.a().shape({firstName:P.b().required("Required"),lastName:P.b().required("Required"),password:P.b().min(2,"Too Short!").max(50,"Too Long!").required("Required"),email:P.b().email("Invalid email").required("Required")})}),m=function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t=i.values,w("".concat("/auth","/register"),t);case 3:o("You have successfully register"),a.push(j()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),l(e.t0.message);case 10:case"end":return e.stop()}var t}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"form"},n.a.createElement(R.Row,{className:"raw-height"},n.a.createElement(R.Col,null,n.a.createElement(B,{label:t("onboarding.firstNamePlaceholder"),name:"firstName",onChange:i.handleChange,value:i.values.firstName,formik:i}))),n.a.createElement(R.Row,{className:"raw-height"},n.a.createElement(R.Col,null,n.a.createElement(B,{label:t("onboarding.lastNamePlaceholder"),name:"lastName",onChange:i.handleChange,value:i.values.lastName,formik:i}))),n.a.createElement(R.Row,{className:"raw-height"},n.a.createElement(R.Col,null,n.a.createElement(B,{label:t("onboarding.emailPlaceholder"),name:"email",type:"email",onChange:i.handleChange,value:i.values.email,formik:i}))),n.a.createElement(R.Row,{className:"raw-height"},n.a.createElement(R.Col,null,n.a.createElement(B,{label:t("onboarding.passwordPlaceholder"),name:"password",type:"password",onChange:i.handleChange,value:i.values.password,formik:i}))),n.a.createElement(R.Row,{className:"raw-height"},n.a.createElement(R.Col,{lg:12,md:12,xs:12,sm:12},n.a.createElement(I.Button,{label:"Submit",disabled:!(i.isValid&&i.dirty),className:"p-button-rounded",onClick:m})),n.a.createElement(R.Col,{lg:12,md:12,xs:12,sm:12},n.a.createElement("a",{href:j()},"Go to login?")))))}))),V=function(){return n.a.createElement("div",null,n.a.createElement(S.d,null,n.a.createElement(S.b,{path:j(),component:A}),n.a.createElement(S.b,{path:T(),component:G}),n.a.createElement(S.a,{to:j()})))},H=t(62),J=(t(181),function(e){var a,t=e.singleFood,c=Object(r.useContext)(k),o=c.state,l=c.addOrderItemToCart,s=n.a.createElement("img",{alt:"Card",src:t.url}),u=n.a.createElement("span",null,n.a.createElement(I.Button,{label:"Add to Cart",icon:"pi pi-check",style:{marginRight:".25em"},onClick:function(){return l(t.id)}}));return n.a.createElement(n.a.Fragment,null,n.a.createElement(R.Row,null,n.a.createElement(R.Col,{className:"mg-bottom"},n.a.createElement(H.Card,{title:t.name,subTitle:(a=t.price_eur,"EUR"===o.currency?"".concat(a," ").concat("EUR"):"".concat((a*o.dollarRate).toFixed(2)," ").concat("USD")),style:{width:"360px"},header:s,footer:u,className:"ui-card-shadow"},n.a.createElement("div",null,t.description)))))}),M=(t(182),function(){var e=Object(r.useContext)(k).state;return n.a.createElement(n.a.Fragment,null,n.a.createElement(R.Row,null,e.food.map((function(e){return n.a.createElement(R.Col,{key:e.id,lg:4,md:4,xs:12,sm:12,className:"mg"},n.a.createElement(J,{singleFood:e,key:e.id}))}))))}),W=Object(S.g)((function(e){var a=e.history,t=Object(r.useContext)(k),c=t.state,o=t.removeItemFromCart,l=t.showError,i=t.showSuccess,m=t.getCurrentOrder,d=Object(Y.b)().t,p=Object(q.a)({initialValues:{address:""}});if(!c.currentOrder||c.currentOrder.order_items&&0==c.currentOrder.order_items.length)return n.a.createElement("h3",null,"Your cart is currently empty");var f=function(e){return n.a.createElement(R.Col,{key:e.id,lg:12,md:12,xs:12,sm:12},n.a.createElement(H.Card,{className:"mg-bottom"},n.a.createElement("div",null,n.a.createElement("div",{className:"p-grid"},n.a.createElement("div",{className:"p-col-12"},"Name: ",e.food.name),n.a.createElement("div",null,"Price: ",h(e.food.price_eur)," ",c.CURRENCY_EUR))),n.a.createElement(I.Button,{label:"Remove",className:"p-button-rounded p-button-danger",onClick:function(){return a=e.id,void o(a);var a}})))},h=function(e){var a=0;return a+=e,"EUR"===c.currency?"".concat(a," ").concat("EUR"):"".concat((a*c.dollarRate).toFixed(2)," ").concat("USD")},E=function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O(c.user.id,c.currentOrder.id,p.values);case 3:i("You have complated your order"),m(),a.push("/home"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),l(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return n.a.createElement(n.a.Fragment,null,n.a.createElement("h2",null,"Cart:"),c.currentOrder.order_items.map((function(e){return f(e)})),n.a.createElement(B,{type:"address",name:"address",onChange:p.handleChange,value:p.values.address,label:d("orders.addressPlaceholder"),formik:p,className:"input"}),n.a.createElement(I.Button,{label:"Submit",disabled:!(p.isValid&&p.dirty),className:"p-button-rounded",onClick:E}))})),$=t(116),K=t.n($),Q=(t(185),function(){var e=Object(r.useContext)(k),a=e.state,t=e.getOrders;Object(r.useEffect)((function(){a.user&&a.user.id&&t()}),[]);var c=function(e){var t=0;return e.forEach((function(e){t+=e})),"EUR"===a.currency?"".concat(t," ").concat("EUR"):"".concat((t*a.dollarRate).toFixed(2)," ").concat("USD")};return n.a.createElement(n.a.Fragment,null,n.a.createElement("h2",null,"Orders:"),n.a.createElement(R.Row,null,a.orders.map((function(e){return function(e){return n.a.createElement(R.Col,{key:e.id,lg:12,md:12,xs:12,sm:12},n.a.createElement(H.Card,{className:"mg-bottom"},n.a.createElement("div",null,n.a.createElement("div",{className:"p-grid"},n.a.createElement("div",{className:"p-col-12"},"Description: ",e.order_items.map((function(e){return"".concat(e.food.name,", ")}))),n.a.createElement("div",{className:"p-col-12"},"Address: ",n.a.createElement("b",null,e.address)),n.a.createElement("div",null,"Price: ",c(e.order_items.map((function(e){return e.food.price_eur})))),n.a.createElement("div",{className:"p-col-12"},"Created At: ",n.a.createElement(K.a,{format:"DD/MM/YYYY HH:mm"},e.created_at))))))}(e)}))))}),X=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(S.d,null,n.a.createElement(S.b,{path:"/home",component:M,exact:!0}),n.a.createElement(S.b,{path:_(),component:Q}),n.a.createElement(S.b,{path:U(),component:W}),n.a.createElement(S.a,{to:"/home"})))},Z=function(){var e=Object(r.useContext)(k),a=e.state,t=e.clearToast,c=Object(r.useRef)(null);Object(r.useEffect)((function(){if(a){var e=a.toast;e&&("error"===e.type?l(e.message):o(e.message),t())}}),[a&&a.toast]);var o=function(e){c.current.show({severity:"success",summary:"Success",detail:e})},l=function(e){c.current.show({severity:"error",summary:"Error",detail:e})};return n.a.createElement(n.a.Fragment,null,n.a.createElement(D.Growl,{ref:c}),n.a.createElement(L,null),n.a.createElement(S.d,null,n.a.createElement(S.b,{path:"/onboarding",component:V}),n.a.createElement(S.b,{path:"/home",component:X}),n.a.createElement(S.a,{to:"/onboarding"})))};var ee=function(){return n.a.createElement("div",null,n.a.createElement(R.Container,null,n.a.createElement(N,null,n.a.createElement(Z,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ae=t(31),te=t(86),re=t(118),ne=t.n(re),ce=t(119),oe=t.n(ce);te.a.use(ne.a).use(oe.a).use(Y.a).init({fallbackLng:"en",debug:!1,react:{wait:!0,useSuspense:!1,bindI18n:"languageChanged loaded",bindStore:"added removed"}});te.a;o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(ae.a,null,n.a.createElement(ee,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[122,1,2]]]);
//# sourceMappingURL=main.528b290f.chunk.js.map